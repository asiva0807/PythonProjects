#LIST OF ACTIVITIES
Commit_action_list=["Oct 10 11:38:36.890  MHNDSN-R06J-GZ-EG mgd[86299]: UI_COMMIT_PROGRESS: Commit operation in progress:  notifying mcsnoopd(103)",
"Oct 10 11:38:41.310  MHNDSN-R06J-GZ-EG mgd[75791]: UI_DBASE_LOGOUT_EVENT: User 'doaa.a70456' exiting configuration mode",
"Oct 10 11:38:53.803  MHNDSN-R06J-GZ-EG mgd[75791]: UI_CMDLINE_READ_LINE: User 'doaa.a70456', command 'ping 172.16.91.2 rapid '",
"Oct 10 11:38:59.348  MHNDSN-R06J-GZ-EG mgd[75791]: UI_CMDLINE_READ_LINE: User 'doaa.a70456', command 'ping 172.16.91.2 rapid count 1000 '",
"Oct 10 11:39:06.189  MHNDSN-R06J-GZ-EG mgd[75791]: UI_CMDLINE_READ_LINE: User 'doaa.a70456', command 'configure private '",
"Oct 10 11:39:10.679  MHNDSN-R06J-GZ-EG mgd[75791]: UI_DBASE_LOGIN_EVENT: User 'doaa.a70456' entering configuration mode",
"Oct 10 11:39:15.039  MHNDSN-R06J-GZ-EG mgd[75791]: UI_CMDLINE_READ_LINE: User 'doaa.a70456', command 'edit routing-instances MistMoh-MIST '",
"Oct 10 11:39:24.162  MHNDSN-R06J-GZ-EG mgd[75791]: UI_CMDLINE_READ_LINE: User 'doaa.a70456', command 'edit interface ge-1/2/9.1101 '",
"Oct 10 11:39:27.582  MHNDSN-R06J-GZ-EG mgd[75791]: UI_CMDLINE_READ_LINE: User 'doaa.a70456', command 'top '",
"Oct 10 11:39:30.182  MHNDSN-R06J-GZ-EG mgd[75791]: UI_CMDLINE_READ_LINE: User 'doaa.a70456', command 'commit and-quit '",
"Oct 10 11:39:30.187  MHNDSN-R06J-GZ-EG mgd[75791]: UI_COMMIT: User 'doaa.a70456' requested 'commit' operation (comment: none)",
"Oct 10 11:39:30.317  MHNDSN-R06J-GZ-EG mgd[75791]: UI_COMMIT_PROGRESS: Commit operation in progress: Obtaining lock for commit",
"Oct 10 11:39:57.581  MHNDSN-R06J-GZ-EG mgd[86350]: UI_AUTH_EVENT: Authenticated user 'root' at permission level 'super-user'",
"Oct 10 11:39:57.581  MHNDSN-R06J-GZ-EG mgd[86350]: UI_LOGIN_EVENT: User 'root' login, class 'super-user' re1[86350], ssh-connection '', client-mode 'junoscript'",
"Oct 10 11:40:04.357  MHNDSN-R06J-GZ-EG mgd[86349]: UI_SYNC_OTHER_RE: Configuration synchronization with remote Routing Engine started",
"Oct 10 11:40:04.849  MHNDSN-R06J-GZ-EG mgd[86350]: UI_JUNOSCRIPT_CMD: User 'root' used JUNOScript client to run command 'get-commit-revision-information'",
"Oct 10 11:40:04.950  MHNDSN-R06J-GZ-EG mgd[86350]: UI_JUNOSCRIPT_CMD: User 'root' used JUNOScript client to run command 'request-end-session'",
"Oct 10 11:40:04.951  MHNDSN-R06J-GZ-EG mgd[86350]: UI_LOGOUT_EVENT: User 'root' logout",
"Oct 10 11:41:50.584  MHNDSN-R06J-GZ-EG mgd[86577]: UI_SYNC_OTHER_RE: Configuration synchronization with remote Routing Engine started",
"Oct 10 11:41:51.806  MHNDSN-R06J-GZ-EG mgd[86577]: UI_CHILD_START: Starting child '/bin/rcp'",
"Oct 10 11:41:52.218  MHNDSN-R06J-GZ-EG mgd[86577]: UI_CHILD_STATUS: Cleanup child '/bin/rcp', PID 86581, status 0x100",
"Oct 10 11:41:52.219  MHNDSN-R06J-GZ-EG mgd[86577]: UI_CHILD_START: Starting child '/bin/rcp'",
"Oct 10 11:41:53.124  MHNDSN-R06J-GZ-EG mgd[86577]: UI_CHILD_STATUS: Cleanup child '/bin/rcp', PID 86583, status 0"]

#LIST OF EVENTS
Log_msg_list = ["Oct 10 11:40:21.108  MHNDSN-R06J-GZ-EG /kernel: rts_ifstate_client_close_job_handler: PHASE 2 sched-out, client:0xb28561d0, cl num:103, cl name:dot1xd",
"Oct 10 11:40:21.108  MHNDSN-R06J-GZ-EG /kernel: rts_ifstate_client_close_job_handler: PHASE 2 entered, client:0xb28561d0, cl num:103,  cl name:dot1xd, next_state:0xae167000",
"Oct 10 11:40:21.108  MHNDSN-R06J-GZ-EG /kernel: rts_ifstate_client_close_job_handler: PHASE 2 sched-out, client:0xb28561d0, cl num:103, cl name:dot1xd, next_state:0xa904fc60",
"Oct 10 11:40:21.108  MHNDSN-R06J-GZ-EG /kernel: rts_ifstate_client_close_job_handler: PHASE 2 entered, client:0xb28561d0, cl num:103,  cl name:dot1xd, next_state:0xa904fc60",
"Oct 10 11:40:21.108  MHNDSN-R06J-GZ-EG /kernel: rts_ifstate_client_close_job_handler: PHASE 2 sched-out, client:0xb28561d0, cl num:103, cl name:dot1xd, next_state:0xb05159b0",
"Oct 10 11:40:21.109  MHNDSN-R06J-GZ-EG /kernel: rts_ifstate_client_close_job_handler: PHASE 2 entered, client:0xb28561d0, cl num:103,  cl name:dot1xd, next_state:0xb05159b0",
"Oct 10 11:40:21.109  MHNDSN-R06J-GZ-EG /kernel: rts_ifstate_client_close_job_handler: client:0xb28561d0 client close job done, cl name:dot1xd, cl num:103",
"Oct 10 11:40:20.726  MHNDSN-R06J-GZ-EG dot1xd[82832]: JTASK_SCHED_SLIP: 30 sec scheduler slip, user: 0 sec 1816 usec, system: 0 sec, 3478 usec",
"Oct 10 11:40:20.730  MHNDSN-R06J-GZ-EG dot1xd[82832]: JTASK_SIGNAL_TERMINATE: first termination signal received",
"Oct 10 11:40:21.087  MHNDSN-R06J-GZ-EG dot1xd[82832]: JTASK_EXIT: Exit dot1xd[82832] version 16.1R7-S1.1 built by builder on 2018-08-03 16:04:14 UTC, caller 0x1bba3b4",
"Oct 10 11:40:20.718  MHNDSN-R06J-GZ-EG authd[86369]: shmlog: argcnt 152 not enough memory for argtype: pcrf-ureq-type: created with 0 mappings (needed 264 remaining 56)",
"Oct 10 11:40:20.730  MHNDSN-R06J-GZ-EG dot1xd[82832]: task_terminate.c task_pre_terminate_method in PNACD",
"Oct 10 11:40:21.099  MHNDSN-R06J-GZ-EG init: dot1x-protocol (PID 82832) exited with status=0 Normal Exit",
"Oct 10 11:40:21.441  MHNDSN-R06J-GZ-EG /kernel: TNPv3: adding remote neighbor entry 0x00000032 hopcount 0 to interface em0.",
"Oct 10 11:40:21.530  MHNDSN-R06J-GZ-EG rshd[86464]: root@master as root: cmd='rcp -f //var/etc/sgw_charging_transpport_profile.id'",
"Oct 10 11:40:21.541  MHNDSN-R06J-GZ-EG authd[86369]: shmlog: argcnt 152 not enough memory for argtype: pcrf-ureq-post-src: created with 0 mappings (needed 264 remaining 56)",
"Oct 10 11:40:21.740  MHNDSN-R06J-GZ-EG dcd[86363]: Warning: identical local address found on rt_inst default, intfs ge-1/1/1.1107 and ge-0/3/7.13479, family inet."]

Cap_started = 0
cmd_list = []
for msg in Log_msg_list:
	if "SCHED_SLIP" in msg:
		for cmd in Commit_action_list:
			if "UI_DBASE_LOGIN_EVENT" in cmd and not Cap_started:
				Cap_started = 1
			elif "UI_COMMIT: User" in cmd:
				Cap_started = 0
			if Cap_started:
				cmd_list.append(cmd)
cmd_list.pop(0)
cmd_list = [x.split("command")[1] for x in cmd_list]
if cmd_list:
	print(cmd_list)


'''sivaa@sivaa-mbp Module 2 % python3 CommitCapture.py
[" 'edit routing-instances MistMoh-MIST '", " 'edit interface ge-1/2/9.1101 '", " 'top '", " 'commit and-quit '"]
sivaa@sivaa-mbp Module 2 % '''